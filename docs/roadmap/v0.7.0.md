# Summon v0.7.0 - Advanced Web & Desktop Prep

**Focus**: Multi-window capabilities and desktop-specific features.
**Goal**: Enable complex desktop-class applications and advanced web workflows.

## 13. Window Management API
**Requirement**: Control application windows programmatically.
**Technical Specs**:
- **Open Window**: Launch a new window with specified content, size, and position.
- **Window State**: Query and modify state (Minimized, Maximized, Fullscreen).
- **Screen Info**: Access information about available displays (resolution, DPI).
- **Web Implementation**: Uses `window.open()` and PWA display modes.
- **Desktop Implementation**: Maps to native window creation (NSWindow, HWND).

## 14. Native Menu Bar
**Requirement**: Application-level menu bar (File, Edit, View).
**Technical Specs**:
- **Structure**: Hierarchical menu definition (Menu -> Item/Submenu/Separator).
- **Shortcuts**: Display keyboard shortcuts next to items.
- **Platform Mapping**:
    - Web: Rendered as a top navigation bar or hamburger menu.
    - macOS: Global system menu bar.
    - Windows/Linux: Window-attached menu bar.

## 15. Native File Dialogs
**Requirement**: System-native dialogs for opening and saving files.
**Technical Specs**:
- **Pick File**: Open dialog to select one or multiple files.
- **Pick Directory**: Open dialog to select a folder.
- **Save File**: Save dialog to choose a destination filename.
- **Filters**: Filter visible files by extension or MIME type.
- **Web Implementation**: Uses File System Access API where available, falls back to `<input type="file">`.

## 16. System Tray
**Requirement**: Persistent icon in the OS system tray / status area.
**Technical Specs**:
- **Icon**: Set and update the tray icon.
- **Menu**: Context menu shown on tray icon click/right-click.
- **Tooltip**: Hover text for the icon.
- **Web Implementation**: No-op (not supported in browsers).

## 17. Multi-Window Communication (BroadcastChannel)
**Requirement**: Message passing between different windows/tabs of the same application.
**Technical Specs**:
- **Channel**: Named channels for pub/sub messaging.
- **Message Types**: Support for serializable data payloads.
- **Scope**: Same-origin restriction.
- **Web Implementation**: Wraps the `BroadcastChannel` API.

## 18. Cross-Window Drag and Drop
**Requirement**: Drag items from one app window and drop them into another.
**Technical Specs**:
- **Coordination**: Use `BroadcastChannel` or shared storage to coordinate drag state between windows if the platform treats them as separate processes (like browser tabs).
- **Data**: Ensure drag data is accessible across window boundaries.

## 19. Shared/Synced Storage
**Requirement**: State persistence that automatically syncs across open windows/tabs.
**Technical Specs**:
- **Storage Hook**: A reactive primitive (like `remember`) that reads/writes to persistent storage.
- **Synchronization**: Updates in one window must trigger recomposition in others listening to the same key.
- **Web Implementation**: `localStorage` + `storage` event listener.

## 20. Document Picture-in-Picture
**Requirement**: Support for "Always on Top" mini-windows for arbitrary content.
**Technical Specs**:
- **PiP Mode**: API to move a component into a floating PiP window.
- **Content**: Support for interactive content (buttons, controls), not just video.
- **Web Implementation**: Wraps the Document Picture-in-Picture API.
